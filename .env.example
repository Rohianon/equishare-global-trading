# =============================================================================
# EquiShare Environment Configuration
# =============================================================================
# Copy this file to .env for local development.
# NEVER commit .env to version control - it contains secrets!
#
# Configuration precedence (highest to lowest):
#   1. Environment variables
#   2. .env.local (personal overrides)
#   3. .env (shared defaults)
#   4. config.yaml
#   5. Default values in code
# =============================================================================

# -----------------------------------------------------------------------------
# Environment
# -----------------------------------------------------------------------------
# development | staging | production
EQUISHARE_ENV=development

# -----------------------------------------------------------------------------
# Server
# -----------------------------------------------------------------------------
EQUISHARE_SERVER_HOST=0.0.0.0
EQUISHARE_SERVER_PORT=8000

# -----------------------------------------------------------------------------
# Database (PostgreSQL)
# -----------------------------------------------------------------------------
EQUISHARE_DATABASE_HOST=localhost
EQUISHARE_DATABASE_PORT=5432
EQUISHARE_DATABASE_USER=equishare
EQUISHARE_DATABASE_PASSWORD=equishare_dev
EQUISHARE_DATABASE_DATABASE=equishare
EQUISHARE_DATABASE_SSL_MODE=disable

# Connection pool settings
EQUISHARE_DATABASE_MAX_OPEN_CONNS=25
EQUISHARE_DATABASE_MAX_IDLE_CONNS=5

# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------
EQUISHARE_REDIS_HOST=localhost
EQUISHARE_REDIS_PORT=6379
EQUISHARE_REDIS_PASSWORD=
EQUISHARE_REDIS_DB=0

# -----------------------------------------------------------------------------
# Kafka
# -----------------------------------------------------------------------------
EQUISHARE_KAFKA_BROKERS=localhost:9092
EQUISHARE_KAFKA_GROUP_ID=equishare-local

# For secured Kafka (staging/production)
# EQUISHARE_KAFKA_SECURITY_PROTOCOL=SASL_SSL
# EQUISHARE_KAFKA_SASL_MECHANISM=PLAIN
# EQUISHARE_KAFKA_SASL_USERNAME=
# EQUISHARE_KAFKA_SASL_PASSWORD=

# -----------------------------------------------------------------------------
# JWT Authentication
# -----------------------------------------------------------------------------
# IMPORTANT: Generate a secure random secret for production!
# Example: openssl rand -base64 32
EQUISHARE_JWT_SECRET=your-super-secret-jwt-key-change-in-production
EQUISHARE_JWT_ISSUER=equishare

# Token expiry (Go duration format: 15m, 1h, 24h, 7d)
EQUISHARE_JWT_ACCESS_TOKEN_EXPIRY=15m
EQUISHARE_JWT_REFRESH_TOKEN_EXPIRY=168h

# -----------------------------------------------------------------------------
# 2FA / TOTP
# -----------------------------------------------------------------------------
EQUISHARE_AUTH_TOTP_ISSUER=EquiShare
EQUISHARE_AUTH_PASSWORD_MIN_LENGTH=8
EQUISHARE_AUTH_MAX_LOGIN_ATTEMPTS=5
EQUISHARE_AUTH_LOCKOUT_DURATION=15m

# -----------------------------------------------------------------------------
# M-Pesa (Safaricom)
# -----------------------------------------------------------------------------
# Get credentials from: https://developer.safaricom.co.ke/
EQUISHARE_MPESA_ENVIRONMENT=sandbox
EQUISHARE_MPESA_CONSUMER_KEY=
EQUISHARE_MPESA_CONSUMER_SECRET=
EQUISHARE_MPESA_PASS_KEY=
EQUISHARE_MPESA_SHORT_CODE=
EQUISHARE_MPESA_INITIATOR_NAME=
EQUISHARE_MPESA_CALLBACK_URL=https://your-domain.com/api/v1/mpesa/callback
EQUISHARE_MPESA_TIMEOUT_URL=https://your-domain.com/api/v1/mpesa/timeout
EQUISHARE_MPESA_RESULT_URL=https://your-domain.com/api/v1/mpesa/result

# -----------------------------------------------------------------------------
# KYC Provider
# -----------------------------------------------------------------------------
# Supported: smile_id, onfido
EQUISHARE_KYC_PROVIDER=smile_id
EQUISHARE_KYC_API_KEY=
EQUISHARE_KYC_BASE_URL=
EQUISHARE_KYC_PARTNER_ID=

# -----------------------------------------------------------------------------
# SMS Provider
# -----------------------------------------------------------------------------
# Supported: africastalking, twilio

# Africa's Talking
EQUISHARE_SMS_PROVIDER=africastalking
EQUISHARE_SMS_API_KEY=
EQUISHARE_SMS_USERNAME=sandbox
EQUISHARE_SMS_SENDER_ID=EquiShare

# Twilio (alternative)
# EQUISHARE_SMS_PROVIDER=twilio
# EQUISHARE_SMS_ACCOUNT_SID=
# EQUISHARE_SMS_AUTH_TOKEN=
# EQUISHARE_SMS_FROM_NUMBER=

# -----------------------------------------------------------------------------
# Alpaca Trading API
# -----------------------------------------------------------------------------
# Get credentials from: https://app.alpaca.markets/
EQUISHARE_ALPACA_ENVIRONMENT=paper
EQUISHARE_ALPACA_API_KEY=
EQUISHARE_ALPACA_API_SECRET=
EQUISHARE_ALPACA_BASE_URL=https://paper-api.alpaca.markets
EQUISHARE_ALPACA_DATA_URL=https://data.alpaca.markets

# -----------------------------------------------------------------------------
# Telemetry / Observability
# -----------------------------------------------------------------------------
EQUISHARE_TELEMETRY_ENABLED=true
EQUISHARE_TELEMETRY_SERVICE_NAME=api-gateway
EQUISHARE_TELEMETRY_COLLECTOR_URL=http://localhost:4317
EQUISHARE_TELEMETRY_SAMPLE_RATE=1.0
